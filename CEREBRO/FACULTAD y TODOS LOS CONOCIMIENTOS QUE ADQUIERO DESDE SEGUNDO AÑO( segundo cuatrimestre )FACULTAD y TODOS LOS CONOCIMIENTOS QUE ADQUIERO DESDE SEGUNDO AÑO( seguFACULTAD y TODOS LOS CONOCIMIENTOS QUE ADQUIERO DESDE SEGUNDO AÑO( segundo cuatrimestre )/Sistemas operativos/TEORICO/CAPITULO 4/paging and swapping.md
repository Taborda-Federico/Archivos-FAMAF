[[THE ABSTRACTION;]]

5 la maquinaria de paginación y intercambio, temas que cubriremos en el futuro cuando discutamos la virtualización de la memoria. Por ahora, solo recuerda que antes de ejecutar cualquier cosa, el sistema operativo claramente debe hacer algún trabajo para obtener los bits importantes del programa desde el disco a la memoria. Una vez que el código y los datos estáticos están cargados en la memoria, hay algunas otras cosas que el sistema operativo necesita hacer antes de ejecutar el proceso. Se debe asignar algo de memoria para la pila de tiempo de ejecución del programa (o simplemente pila). Como probablemente ya sepas, los programas en C utilizan la pila para variables locales, parámetros de función y direcciones de retorno; el sistema operativo asigna esta memoria y se la da al proceso. El sistema operativo también probablemente inicializará la pila con argumentos; específicamente, llenará los parámetros de la función main(), es decir, argc y el arreglo argv. El sistema operativo también puede asignar algo de memoria para el montón del programa. En los programas en C, el montón se utiliza para datos dinámicamente asignados solicitados explícitamente; los programas solicitan tal espacio llamando a malloc() y lo liberan explícitamente llamando a free(). El montón es necesario para estructuras de datos como listas enlazadas, tablas hash, árboles y otras estructuras de datos interesantes. El montón será pequeño al principio; a medida que el programa se ejecute y solicite más memoria a través de la API de la biblioteca malloc(), el sistema operativo puede involucrarse y asignar más memoria al proceso para ayudar a satisfacer tales llamadas. El sistema operativo también realizará algunas otras tareas de inicialización, particularmente en relación con la entrada/salida (E/S). Por ejemplo, en sistemas UNIX, cada proceso por defecto tiene tres descriptores de archivo abiertos, para entrada estándar, salida y error; estos descriptores permiten a los programas leer fácilmente la entrada desde el terminal e imprimir la salida en la pantalla. Aprenderemos más sobre E/S, descriptores de archivo y similares en la tercera parte del libro sobre persistencia. Al cargar el código y los datos estáticos en la memoria, al crear e inicializar una pila, y al realizar otro trabajo relacionado con la configuración de E/S, el sistema operativo ha establecido ahora (finalmente) el escenario para la ejecución del programa. Así, tiene una última tarea: iniciar el programa en el punto de entrada, a saber, main(). Al saltar a la rutina main() (a través de un mecanismo especializado que discutiremos en el próximo capítulo), el sistema operativo transfiere el control de la CPU al proceso recién creado, y así el programa comienza su ejecución.